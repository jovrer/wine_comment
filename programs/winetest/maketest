#!/bin/sh

TOPSRCDIR="$1"
shift

echo "/* Automatically generated -- do not edit! */"
echo "#include \"resource.h\""
echo "STRINGTABLE {"

i=0
for test
do
    echo "$i \"$test\""
    i=`expr $i + 1`
done

i=0
cd $TOPSRCDIR
for dir in dlls/*/tests; do
    sed -ne "s|^/\([^.]*.c\)/\([^/]*\).*|$dir/\1:\2|p" $dir/CVS/Entries 2>/dev/null
done |\
while read; do
    echo "REV_INFO+$i \"$REPLY\""
    i=`expr $i + 1`
done

echo "}"

i=0
for test
do
    echo "$i TESTRES \"$test\""
    i=`expr $i + 1`
done
